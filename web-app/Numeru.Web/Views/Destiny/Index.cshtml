@model DestinyIndexViewModel
@inject IOpenGraph<DestinyView> openGraph
@inject IMetaDescription<DestinyView> metaDescription

@{
    ViewData["Title"] = "Судьба";
    ViewData["Route"] = "Destiny";
}

@section MetaData {
    <meta name="description" content="@metaDescription.Get()" />
    <partial name="~/Views/Partials/_OpenGraph.cshtml" model="openGraph.Data()" />
}

<style>
    input[type="submit"] {
        max-width: 400px;
    }

    .prediction-text {
        text-align: justify;
    }
</style>

<div class="block text-center">
    Имя, данное Вам при рождении и дата рождения расскажут о Вашей судьбе и предназначении.
</div>

<form class="block mt-1" asp-controller="Destiny" asp-action="Index" method="post">
    <div>
        <label class="form-label" asp-for="@Model.Fullname"></label>
        <input class="form-control" asp-for="@Model.Fullname" />
        <span asp-validation-for="@Model.Fullname" class="text-danger"></span>
    </div>

    <div class="mt-2">
        <label class="form-label" asp-for="@Model.BirthDate"></label>
        <input type="date" class="form-control" asp-for="@Model.BirthDate" />
        <span asp-validation-for="@Model.BirthDate" class="text-danger"></span>
    </div>

    <div class="mt-4 text-center">
        <input type="submit" class="btn btn-outline-light rounded-pill w-100" value="Рассчитать" />
    </div>
</form>

@if (Model.Calculated)
{
    <div class="block mt-1" id="prediction-block">
        <partial name="~/Views/Partials/_Number.cshtml" model="@Model.Number" />

        <div class="mt-2 lead text-center">
            Ваше число судьбы
        </div>

        <div class="mt-3 prediction-text">
            @Model.Prediction
        </div>
    </div>

    <div class="block mt-1">
        <partial name="~/Views/Partials/_NumericCalculation.cshtml" model="@Model.Calculation" />
    </div>
}

@section Scripts {
    <script>
        const predictionEl = document.querySelector("#prediction-block");
        if (predictionEl) {
            predictionEl.scrollIntoView();
        }
    </script>
}